# Lux Test Summarizer and Clusterer

This project contains two Python scripts that work together to summarize and analyze Lux test files:

1. `categorize-lux-tests.py`: Extracts information from Lux test files and creates a summary.
2. `group-tests.py`: Clusters the summarized tests based on content similarity.

## categorize-lux-tests.py

This script processes Lux test files (.lux) and generates a summary of their contents.

### Features:

- Recursively searches for .lux files in a given directory
- Extracts comments, [doc] descriptions, [invoke log] entries, and [progress] information
- Generates a summary file (lux_tests_summary.txt) with organized test information

## group-tests.py

This script organizes Lux tests into groups based on their content similarity using machine learning techniques and natural language processing.

### Features:

- Uses K-means clustering algorithm to group tests based on content similarity
- Processes the summary generated by `categorize-lux-tests.py`
- Utilizes bigrams (pairs of adjacent words) for more meaningful text analysis
- Allows customization of the number of clusters
- Generates a report of test groups with their common attributes
- Provides an option to display histograms of most common bigrams in each cluster

### Purpose:

The use of bigrams in this approach serves several important purposes:
1. Captures more context: Bigrams preserve word order and relationships, providing more meaningful insights than individual words alone.
2. Identifies common phrases: Helps in recognizing frequently occurring phrases or concepts within test descriptions.
3. Improves clustering accuracy: By considering word pairs, the clustering algorithm can better group tests with similar themes or purposes.

### Usage:


```bash
 ./venv/bin/python categorize-lux-tests.py --help
usage: categorize-lux-tests.py [-h] [--no-doc] [--no-comments] [--no-invoke-logs] [--no-progress] [--include-full-content]
                               [-o OUTPUT]
                               root_directory

Summarize Lux test files.

positional arguments:
  root_directory        Path to the root directory containing Lux test files

options:
  -h, --help            show this help message and exit
  --no-doc              Don't extract documentation description
  --no-comments         Don't extract comments
  --no-invoke-logs      Don't extract invoke logs
  --no-progress         Don't extract progress information
  --include-full-content
                        Include full content of Lux files
  -o OUTPUT, --output OUTPUT
                        Output file name (default: lux_tests_summary.txt)
```

```bash
./venv/bin/python group-tests.py --help
usage: group-tests.py [-h] [-f FILE_PATH] [-n NUM_CLUSTERS] [--histogram]

Cluster Lux tests based on content similarity.

options:
  -h, --help            show this help message and exit
  -f FILE_PATH, --file-path FILE_PATH
                        Path to the lux_tests_summary.txt file (default: lux_tests_summary.txt)
  -n NUM_CLUSTERS, --num-clusters NUM_CLUSTERS
                        Number of clusters to create (default: 5)
  --histogram           Print histograms of cluster centers
```

I've found it hard to get any really good results. A somewhat even distribution of tests
across clusters was achieved by trial and error, where I only used the directory
names (which are somewhat descriptive) and the Lux doc text. The `--histogram` switch
can be used to see the top bigrams (word pairs) in each cluster.

```bash
   ./venv/bin/python categorize-lux-tests.py --no-comments --no-invoke-logs --no-progress tests/restconf
   ./venv/bin/python group-tests.py --num-clusters 5 --histogram
```



